"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_ssr_lib_alertSystem_ts";
exports.ids = ["_ssr_lib_alertSystem_ts"];
exports.modules = {

/***/ "(ssr)/./lib/alertSystem.ts":
/*!****************************!*\
  !*** ./lib/alertSystem.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateAlerts: () => (/* binding */ generateAlerts),\n/* harmony export */   saveAlerts: () => (/* binding */ saveAlerts)\n/* harmony export */ });\n/* harmony import */ var _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/supabaseClient */ \"(ssr)/./lib/supabaseClient.ts\");\n\nconst generateAlerts = (weather, market, farmProfileOrCrop)=>{\n    const alerts = [];\n    const cropName = typeof farmProfileOrCrop === \"string\" ? farmProfileOrCrop : farmProfileOrCrop?.crop || \"Crop\";\n    // --- Weather Analysis ---\n    if (weather?.current) {\n        const { temp_c, condition, wind_kph } = weather.current;\n        // High Temp Warning\n        if (temp_c > 35) {\n            alerts.push({\n                type: \"weather\",\n                severity: \"warning\",\n                title: \"High Heat Warning\",\n                message: `Temperature is ${Math.round(temp_c)}Â°C. Ensure adequate irrigation for ${cropName}.`\n            });\n        }\n        // Storm/Rain Warning\n        if (condition?.text?.toLowerCase().includes(\"rain\") || condition?.text?.toLowerCase().includes(\"storm\")) {\n            alerts.push({\n                type: \"weather\",\n                severity: \"critical\",\n                title: \"Rain Alert\",\n                message: `Heavy rain detected (${condition.text}). Pause spraying activities.`\n            });\n        }\n        // Wind Warning\n        if (wind_kph > 30) {\n            alerts.push({\n                type: \"weather\",\n                severity: \"warning\",\n                title: \"High Winds\",\n                message: `Wind speed ${wind_kph} km/h. Avoid high sprayers.`\n            });\n        }\n    }\n    // --- Market Analysis ---\n    if (market?.currentPrice) {\n        const { modal, min, max } = market.currentPrice;\n        // Price Drop Check (Simple heuristic)\n        // In a real app, we'd compare to yesterday's price\n        if (market.priceHistory && market.priceHistory.length > 0) {\n            const lastMonthPrice = market.priceHistory[market.priceHistory.length - 1].avgPrice;\n            if (modal < lastMonthPrice * 0.9) {\n                alerts.push({\n                    type: \"market\",\n                    severity: \"critical\",\n                    title: \"Price Drop Alert\",\n                    message: `Market price for ${market.cropName} has dropped below last month's average.`\n                });\n            }\n        }\n    }\n    return alerts;\n};\nconst saveAlerts = async (newAlerts)=>{\n    if (newAlerts.length === 0) return;\n    // Check against existing recent alerts to avoid span\n    // For this hackathon demo, we'll just insert non-duplicates based on title/message keys\n    // effectively \"deduplication\" could be complex, but let's keep it simple:\n    // Just insert them. The user wants to see them appear.\n    const { error } = await _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"farm_alerts\").insert(newAlerts);\n    if (error) {\n        console.error(\"Error saving alerts:\", error);\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9saWIvYWxlcnRTeXN0ZW0udHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ2dEO0FBWXpDLE1BQU1DLGlCQUFpQixDQUFDQyxTQUFjQyxRQUFhQztJQUN0RCxNQUFNQyxTQUFrQixFQUFFO0lBQzFCLE1BQU1DLFdBQVcsT0FBT0Ysc0JBQXNCLFdBQVdBLG9CQUFvQkEsbUJBQW1CRyxRQUFRO0lBRXhHLDJCQUEyQjtJQUMzQixJQUFJTCxTQUFTTSxTQUFTO1FBQ2xCLE1BQU0sRUFBRUMsTUFBTSxFQUFFQyxTQUFTLEVBQUVDLFFBQVEsRUFBRSxHQUFHVCxRQUFRTSxPQUFPO1FBRXZELG9CQUFvQjtRQUNwQixJQUFJQyxTQUFTLElBQUk7WUFDYkosT0FBT08sSUFBSSxDQUFDO2dCQUNSQyxNQUFNO2dCQUNOQyxVQUFVO2dCQUNWQyxPQUFPO2dCQUNQQyxTQUFTLENBQUMsZUFBZSxFQUFFQyxLQUFLQyxLQUFLLENBQUNULFFBQVEsbUNBQW1DLEVBQUVILFNBQVMsQ0FBQyxDQUFDO1lBQ2xHO1FBQ0o7UUFFQSxxQkFBcUI7UUFDckIsSUFBSUksV0FBV1MsTUFBTUMsY0FBY0MsU0FBUyxXQUFXWCxXQUFXUyxNQUFNQyxjQUFjQyxTQUFTLFVBQVU7WUFDckdoQixPQUFPTyxJQUFJLENBQUM7Z0JBQ1JDLE1BQU07Z0JBQ05DLFVBQVU7Z0JBQ1ZDLE9BQU87Z0JBQ1BDLFNBQVMsQ0FBQyxxQkFBcUIsRUFBRU4sVUFBVVMsSUFBSSxDQUFDLDZCQUE2QixDQUFDO1lBQ2xGO1FBQ0o7UUFFQSxlQUFlO1FBQ2YsSUFBSVIsV0FBVyxJQUFJO1lBQ2ZOLE9BQU9PLElBQUksQ0FBQztnQkFDUkMsTUFBTTtnQkFDTkMsVUFBVTtnQkFDVkMsT0FBTztnQkFDUEMsU0FBUyxDQUFDLFdBQVcsRUFBRUwsU0FBUywyQkFBMkIsQ0FBQztZQUNoRTtRQUNKO0lBQ0o7SUFFQSwwQkFBMEI7SUFDMUIsSUFBSVIsUUFBUW1CLGNBQWM7UUFDdEIsTUFBTSxFQUFFQyxLQUFLLEVBQUVDLEdBQUcsRUFBRUMsR0FBRyxFQUFFLEdBQUd0QixPQUFPbUIsWUFBWTtRQUUvQyxzQ0FBc0M7UUFDdEMsbURBQW1EO1FBQ25ELElBQUluQixPQUFPdUIsWUFBWSxJQUFJdkIsT0FBT3VCLFlBQVksQ0FBQ0MsTUFBTSxHQUFHLEdBQUc7WUFDdkQsTUFBTUMsaUJBQWlCekIsT0FBT3VCLFlBQVksQ0FBQ3ZCLE9BQU91QixZQUFZLENBQUNDLE1BQU0sR0FBRyxFQUFFLENBQUNFLFFBQVE7WUFDbkYsSUFBSU4sUUFBUUssaUJBQWlCLEtBQUs7Z0JBQzlCdkIsT0FBT08sSUFBSSxDQUFDO29CQUNSQyxNQUFNO29CQUNOQyxVQUFVO29CQUNWQyxPQUFPO29CQUNQQyxTQUFTLENBQUMsaUJBQWlCLEVBQUViLE9BQU9HLFFBQVEsQ0FBQyx3Q0FBd0MsQ0FBQztnQkFDMUY7WUFDSjtRQUNKO0lBQ0o7SUFFQSxPQUFPRDtBQUNYLEVBQUU7QUFFSyxNQUFNeUIsYUFBYSxPQUFPQztJQUM3QixJQUFJQSxVQUFVSixNQUFNLEtBQUssR0FBRztJQUU1QixxREFBcUQ7SUFDckQsd0ZBQXdGO0lBQ3hGLDBFQUEwRTtJQUMxRSx1REFBdUQ7SUFFdkQsTUFBTSxFQUFFSyxLQUFLLEVBQUUsR0FBRyxNQUFNaEMseURBQVFBLENBQzNCaUMsSUFBSSxDQUFDLGVBQ0xDLE1BQU0sQ0FBQ0g7SUFFWixJQUFJQyxPQUFPO1FBQ1BHLFFBQVFILEtBQUssQ0FBQyx3QkFBd0JBO0lBQzFDO0FBQ0osRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL3NtYXJ0LWZhcm1pbmctYXNzaXN0YW50Ly4vbGliL2FsZXJ0U3lzdGVtLnRzP2Q4NGUiXSwic291cmNlc0NvbnRlbnQiOlsiXG5pbXBvcnQgeyBzdXBhYmFzZSB9IGZyb20gJ0AvbGliL3N1cGFiYXNlQ2xpZW50JztcblxuZXhwb3J0IGludGVyZmFjZSBBbGVydCB7XG4gICAgaWQ/OiBzdHJpbmc7XG4gICAgdHlwZTogJ3dlYXRoZXInIHwgJ3Blc3QnIHwgJ21hcmtldCcgfCAnZ2VuZXJhbCc7XG4gICAgc2V2ZXJpdHk6ICdpbmZvJyB8ICd3YXJuaW5nJyB8ICdjcml0aWNhbCc7XG4gICAgdGl0bGU6IHN0cmluZztcbiAgICBtZXNzYWdlOiBzdHJpbmc7XG4gICAgY3JlYXRlZF9hdD86IHN0cmluZztcbiAgICBpc19yZWFkPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNvbnN0IGdlbmVyYXRlQWxlcnRzID0gKHdlYXRoZXI6IGFueSwgbWFya2V0OiBhbnksIGZhcm1Qcm9maWxlT3JDcm9wOiBhbnkpOiBBbGVydFtdID0+IHtcbiAgICBjb25zdCBhbGVydHM6IEFsZXJ0W10gPSBbXTtcbiAgICBjb25zdCBjcm9wTmFtZSA9IHR5cGVvZiBmYXJtUHJvZmlsZU9yQ3JvcCA9PT0gJ3N0cmluZycgPyBmYXJtUHJvZmlsZU9yQ3JvcCA6IGZhcm1Qcm9maWxlT3JDcm9wPy5jcm9wIHx8ICdDcm9wJztcblxuICAgIC8vIC0tLSBXZWF0aGVyIEFuYWx5c2lzIC0tLVxuICAgIGlmICh3ZWF0aGVyPy5jdXJyZW50KSB7XG4gICAgICAgIGNvbnN0IHsgdGVtcF9jLCBjb25kaXRpb24sIHdpbmRfa3BoIH0gPSB3ZWF0aGVyLmN1cnJlbnQ7XG5cbiAgICAgICAgLy8gSGlnaCBUZW1wIFdhcm5pbmdcbiAgICAgICAgaWYgKHRlbXBfYyA+IDM1KSB7XG4gICAgICAgICAgICBhbGVydHMucHVzaCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3dlYXRoZXInLFxuICAgICAgICAgICAgICAgIHNldmVyaXR5OiAnd2FybmluZycsXG4gICAgICAgICAgICAgICAgdGl0bGU6ICdIaWdoIEhlYXQgV2FybmluZycsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogYFRlbXBlcmF0dXJlIGlzICR7TWF0aC5yb3VuZCh0ZW1wX2MpfcKwQy4gRW5zdXJlIGFkZXF1YXRlIGlycmlnYXRpb24gZm9yICR7Y3JvcE5hbWV9LmAsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFN0b3JtL1JhaW4gV2FybmluZ1xuICAgICAgICBpZiAoY29uZGl0aW9uPy50ZXh0Py50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdyYWluJykgfHwgY29uZGl0aW9uPy50ZXh0Py50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdzdG9ybScpKSB7XG4gICAgICAgICAgICBhbGVydHMucHVzaCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3dlYXRoZXInLFxuICAgICAgICAgICAgICAgIHNldmVyaXR5OiAnY3JpdGljYWwnLFxuICAgICAgICAgICAgICAgIHRpdGxlOiAnUmFpbiBBbGVydCcsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogYEhlYXZ5IHJhaW4gZGV0ZWN0ZWQgKCR7Y29uZGl0aW9uLnRleHR9KS4gUGF1c2Ugc3ByYXlpbmcgYWN0aXZpdGllcy5gLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBXaW5kIFdhcm5pbmdcbiAgICAgICAgaWYgKHdpbmRfa3BoID4gMzApIHtcbiAgICAgICAgICAgIGFsZXJ0cy5wdXNoKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnd2VhdGhlcicsXG4gICAgICAgICAgICAgICAgc2V2ZXJpdHk6ICd3YXJuaW5nJyxcbiAgICAgICAgICAgICAgICB0aXRsZTogJ0hpZ2ggV2luZHMnLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBXaW5kIHNwZWVkICR7d2luZF9rcGh9IGttL2guIEF2b2lkIGhpZ2ggc3ByYXllcnMuYCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gLS0tIE1hcmtldCBBbmFseXNpcyAtLS1cbiAgICBpZiAobWFya2V0Py5jdXJyZW50UHJpY2UpIHtcbiAgICAgICAgY29uc3QgeyBtb2RhbCwgbWluLCBtYXggfSA9IG1hcmtldC5jdXJyZW50UHJpY2U7XG5cbiAgICAgICAgLy8gUHJpY2UgRHJvcCBDaGVjayAoU2ltcGxlIGhldXJpc3RpYylcbiAgICAgICAgLy8gSW4gYSByZWFsIGFwcCwgd2UnZCBjb21wYXJlIHRvIHllc3RlcmRheSdzIHByaWNlXG4gICAgICAgIGlmIChtYXJrZXQucHJpY2VIaXN0b3J5ICYmIG1hcmtldC5wcmljZUhpc3RvcnkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgbGFzdE1vbnRoUHJpY2UgPSBtYXJrZXQucHJpY2VIaXN0b3J5W21hcmtldC5wcmljZUhpc3RvcnkubGVuZ3RoIC0gMV0uYXZnUHJpY2U7XG4gICAgICAgICAgICBpZiAobW9kYWwgPCBsYXN0TW9udGhQcmljZSAqIDAuOSkge1xuICAgICAgICAgICAgICAgIGFsZXJ0cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ21hcmtldCcsXG4gICAgICAgICAgICAgICAgICAgIHNldmVyaXR5OiAnY3JpdGljYWwnLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ1ByaWNlIERyb3AgQWxlcnQnLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBgTWFya2V0IHByaWNlIGZvciAke21hcmtldC5jcm9wTmFtZX0gaGFzIGRyb3BwZWQgYmVsb3cgbGFzdCBtb250aCdzIGF2ZXJhZ2UuYCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBhbGVydHM7XG59O1xuXG5leHBvcnQgY29uc3Qgc2F2ZUFsZXJ0cyA9IGFzeW5jIChuZXdBbGVydHM6IEFsZXJ0W10pID0+IHtcbiAgICBpZiAobmV3QWxlcnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXG4gICAgLy8gQ2hlY2sgYWdhaW5zdCBleGlzdGluZyByZWNlbnQgYWxlcnRzIHRvIGF2b2lkIHNwYW5cbiAgICAvLyBGb3IgdGhpcyBoYWNrYXRob24gZGVtbywgd2UnbGwganVzdCBpbnNlcnQgbm9uLWR1cGxpY2F0ZXMgYmFzZWQgb24gdGl0bGUvbWVzc2FnZSBrZXlzXG4gICAgLy8gZWZmZWN0aXZlbHkgXCJkZWR1cGxpY2F0aW9uXCIgY291bGQgYmUgY29tcGxleCwgYnV0IGxldCdzIGtlZXAgaXQgc2ltcGxlOlxuICAgIC8vIEp1c3QgaW5zZXJ0IHRoZW0uIFRoZSB1c2VyIHdhbnRzIHRvIHNlZSB0aGVtIGFwcGVhci5cblxuICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdmYXJtX2FsZXJ0cycpXG4gICAgICAgIC5pbnNlcnQobmV3QWxlcnRzKTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzYXZpbmcgYWxlcnRzOicsIGVycm9yKTtcbiAgICB9XG59O1xuIl0sIm5hbWVzIjpbInN1cGFiYXNlIiwiZ2VuZXJhdGVBbGVydHMiLCJ3ZWF0aGVyIiwibWFya2V0IiwiZmFybVByb2ZpbGVPckNyb3AiLCJhbGVydHMiLCJjcm9wTmFtZSIsImNyb3AiLCJjdXJyZW50IiwidGVtcF9jIiwiY29uZGl0aW9uIiwid2luZF9rcGgiLCJwdXNoIiwidHlwZSIsInNldmVyaXR5IiwidGl0bGUiLCJtZXNzYWdlIiwiTWF0aCIsInJvdW5kIiwidGV4dCIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJjdXJyZW50UHJpY2UiLCJtb2RhbCIsIm1pbiIsIm1heCIsInByaWNlSGlzdG9yeSIsImxlbmd0aCIsImxhc3RNb250aFByaWNlIiwiYXZnUHJpY2UiLCJzYXZlQWxlcnRzIiwibmV3QWxlcnRzIiwiZXJyb3IiLCJmcm9tIiwiaW5zZXJ0IiwiY29uc29sZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./lib/alertSystem.ts\n");

/***/ })

};
;