"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/analysis/route";
exports.ids = ["app/api/analysis/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalysis%2Froute&page=%2Fapi%2Fanalysis%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalysis%2Froute.ts&appDir=%2FUsers%2Fnani%2Fhackathon%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fnani%2Fhackathon&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalysis%2Froute&page=%2Fapi%2Fanalysis%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalysis%2Froute.ts&appDir=%2FUsers%2Fnani%2Fhackathon%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fnani%2Fhackathon&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_nani_hackathon_app_api_analysis_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/analysis/route.ts */ \"(rsc)/./app/api/analysis/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/analysis/route\",\n        pathname: \"/api/analysis\",\n        filename: \"route\",\n        bundlePath: \"app/api/analysis/route\"\n    },\n    resolvedPagePath: \"/Users/nani/hackathon/app/api/analysis/route.ts\",\n    nextConfigOutput,\n    userland: _Users_nani_hackathon_app_api_analysis_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/analysis/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhbmFseXNpcyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGYW5hbHlzaXMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZhbmFseXNpcyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRm5hbmklMkZoYWNrYXRob24lMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGbmFuaSUyRmhhY2thdGhvbiZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDRDtBQUM1RTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3NtYXJ0LWZhcm1pbmctYXNzaXN0YW50Lz81ZGY5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9uYW5pL2hhY2thdGhvbi9hcHAvYXBpL2FuYWx5c2lzL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hbmFseXNpcy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2FuYWx5c2lzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9hbmFseXNpcy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9uYW5pL2hhY2thdGhvbi9hcHAvYXBpL2FuYWx5c2lzL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9hbmFseXNpcy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalysis%2Froute&page=%2Fapi%2Fanalysis%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalysis%2Froute.ts&appDir=%2FUsers%2Fnani%2Fhackathon%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fnani%2Fhackathon&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/analysis/route.ts":
/*!***********************************!*\
  !*** ./app/api/analysis/route.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n\nasync function POST(request) {\n    try {\n        const { farmProfile, weatherData } = await request.json();\n        if (!farmProfile) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Farm profile is required\"\n            }, {\n                status: 400\n            });\n        }\n        const analysis = generateIntelligentAnalysis(farmProfile, weatherData);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(analysis);\n    } catch (error) {\n        console.error(\"Analysis API Error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to generate analysis\"\n        }, {\n            status: 500\n        });\n    }\n}\nfunction generateIntelligentAnalysis(farmProfile, weatherData) {\n    const { soilType, currentCrops, location, farmSize } = farmProfile;\n    // Soil-based irrigation recommendations\n    const irrigationPlan = generateIrrigationPlan(soilType, currentCrops, weatherData);\n    // Weather and soil-based yield forecast\n    const yieldForecast = generateYieldForecast(soilType, currentCrops, weatherData, farmSize);\n    // Disease risk based on weather\n    const diseaseRisk = calculateDiseaseRisk(currentCrops, weatherData);\n    // Sustainability score\n    const ecoScore = calculateEcoScore(soilType, irrigationPlan);\n    return {\n        irrigationPlan,\n        yieldForecast,\n        diseaseRisk,\n        ecoScore,\n        recommendations: generateRecommendations(farmProfile, weatherData, irrigationPlan, yieldForecast)\n    };\n}\nfunction generateIrrigationPlan(soilType, crops, weatherData) {\n    // Soil water retention capacity\n    const soilRetention = {\n        \"Clay\": {\n            retention: \"high\",\n            drainageSpeed: \"slow\",\n            wateringFrequency: \"low\"\n        },\n        \"Sandy\": {\n            retention: \"low\",\n            drainageSpeed: \"fast\",\n            wateringFrequency: \"high\"\n        },\n        \"Loamy\": {\n            retention: \"medium\",\n            drainageSpeed: \"medium\",\n            wateringFrequency: \"medium\"\n        },\n        \"Silty\": {\n            retention: \"medium-high\",\n            drainageSpeed: \"medium-slow\",\n            wateringFrequency: \"low-medium\"\n        }\n    };\n    const soilInfo = soilRetention[soilType] || soilRetention[\"Loamy\"];\n    // Calculate irrigation needs based on weather\n    const avgTemp = weatherData?.forecast?.reduce((sum, day)=>sum + day.temp, 0) / 7 || 25;\n    const totalRain = weatherData?.forecast?.reduce((sum, day)=>sum + day.rain, 0) || 0;\n    let wateringSchedule = \"Every 3 days\";\n    let dailyWaterAmount = 25; // in mm\n    let method = \"Drip irrigation\";\n    // Adjust based on soil type\n    if (soilType === \"Clay\") {\n        wateringSchedule = totalRain > 50 ? \"Every 5-7 days\" : \"Every 4-5 days\";\n        dailyWaterAmount = 20;\n        method = \"Drip irrigation (prevent waterlogging)\";\n    } else if (soilType === \"Sandy\") {\n        wateringSchedule = totalRain > 50 ? \"Every 2 days\" : \"Daily\";\n        dailyWaterAmount = 30;\n        method = \"Drip or sprinkler irrigation\";\n    } else if (soilType === \"Loamy\") {\n        wateringSchedule = totalRain > 50 ? \"Every 4 days\" : \"Every 3 days\";\n        dailyWaterAmount = 25;\n        method = \"Any irrigation method\";\n    }\n    // Adjust for temperature\n    if (avgTemp > 30) {\n        dailyWaterAmount = dailyWaterAmount + 5;\n    }\n    // Calculate Weekly Total\n    const frequencyDays = wateringSchedule.includes(\"Daily\") ? 1 : parseInt(wateringSchedule.match(/\\d+/)?.[0] || \"3\");\n    const weeklyTotal = dailyWaterAmount * 7 / frequencyDays;\n    // Generate Smart 7-Day Schedule (Mock based on weather logic)\n    const days = [\n        \"Mon\",\n        \"Tue\",\n        \"Wed\",\n        \"Thu\",\n        \"Fri\",\n        \"Sat\",\n        \"Sun\"\n    ];\n    const smartSchedule = days.map((day, i)=>{\n        // Improve logic: Skip if rain > 10mm, Irrigate based on schedule freq\n        const isRainy = (weatherData?.forecast?.[i]?.rain || 0) > 10;\n        const isIrrigationDay = i % frequencyDays === 0;\n        let action = \"Hold\";\n        let icon = \"cloud\";\n        let amount = \"-\";\n        if (isRainy) {\n            action = \"Skip\";\n            icon = \"rain\";\n            amount = \"Rain\";\n        } else if (isIrrigationDay) {\n            action = \"Irrigate\";\n            icon = \"droplet\";\n            amount = `${dailyWaterAmount}mm`;\n        }\n        return {\n            day,\n            action,\n            icon,\n            amount\n        };\n    });\n    // Generate Steps based on Method\n    let steps = [\n        \"Check soil moisture at root depth (10-15cm).\",\n        \"Ensure water source is clean and filter is working.\"\n    ];\n    if (method.includes(\"Drip\")) {\n        steps.push(\"Open lateral valves and flush lines for 2 mins.\");\n        steps.push(`Run system for calculated duration to deliver ${dailyWaterAmount}mm.`);\n        steps.push(\"Check for clogged emitters.\");\n    } else {\n        steps.push(\"Ensure even distribution across the field.\");\n        steps.push(\"Avoid watering during high wind or peak heat.\");\n    }\n    return {\n        soilType,\n        retention: soilInfo.retention,\n        drainageSpeed: soilInfo.drainageSpeed,\n        wateringSchedule,\n        dailyWaterAmount: dailyWaterAmount,\n        amountPerIrrigation: dailyWaterAmount,\n        method,\n        weeklyTotal: parseFloat(weeklyTotal.toFixed(1)),\n        rainAdjustment: totalRain > 50 ? \"Reduce watering by 30%\" : \"Normal schedule\",\n        tips: generateIrrigationTips(soilType, totalRain),\n        smartSchedule,\n        steps\n    };\n}\nfunction generateYieldForecast(soilType, crops, weatherData, farmSize) {\n    // Base yield per acre for different crops (kg)\n    const baseYields = {\n        \"Rice\": 2500,\n        \"Wheat\": 2000,\n        \"Cotton\": 1500,\n        \"Corn\": 3000,\n        \"Soybean\": 1800,\n        \"Sugarcane\": 35000,\n        \"Potato\": 15000,\n        \"Tomato\": 20000\n    };\n    // Soil quality multipliers\n    const soilMultipliers = {\n        \"Clay\": 0.9,\n        \"Sandy\": 0.85,\n        \"Loamy\": 1.0,\n        \"Silty\": 0.95\n    };\n    // Weather impact\n    const avgTemp = weatherData?.forecast?.reduce((sum, day)=>sum + day.temp, 0) / 7 || 25;\n    const totalRain = weatherData?.forecast?.reduce((sum, day)=>sum + day.rain, 0) || 0;\n    let weatherMultiplier = 1.0;\n    if (avgTemp > 35 || avgTemp < 15) weatherMultiplier -= 0.1;\n    if (totalRain < 20) weatherMultiplier -= 0.15;\n    if (totalRain > 100) weatherMultiplier -= 0.1;\n    if (totalRain >= 20 && totalRain <= 80) weatherMultiplier += 0.05;\n    const cropForecasts = crops.map((crop)=>{\n        const baseYield = baseYields[crop] || 2000;\n        const soilMultiplier = soilMultipliers[soilType] || 0.9;\n        const estimatedYield = Math.round(baseYield * soilMultiplier * weatherMultiplier * farmSize);\n        // Potential Yield is the yield under optimal conditions (1.2x boost usually)\n        const potentialYield = Math.round(baseYield * soilMultiplier * 1.2 * farmSize);\n        const trend = weatherMultiplier > 1.0 ? \"up\" : weatherMultiplier < 0.95 ? \"down\" : \"stable\";\n        const changePercent = Math.round((weatherMultiplier - 1) * 100);\n        // Generate Scenarios for \"What-If\" Simulator\n        const scenarios = [\n            {\n                id: \"s1\",\n                name: \"Switch to Drip Irrigation\",\n                description: \"Improves water efficiency by 40%\",\n                yieldBoost: Math.round(baseYield * 0.15),\n                impact: \"+15%\",\n                cost: \"Medium\"\n            },\n            {\n                id: \"s2\",\n                name: \"Apply Organic Compost\",\n                description: \"Enhances soil structure and retention\",\n                yieldBoost: Math.round(baseYield * 0.1),\n                impact: \"+10%\",\n                cost: \"Low\"\n            },\n            {\n                id: \"s3\",\n                name: \"Pest Management Program\",\n                description: \"Reduces crop loss from pests\",\n                yieldBoost: Math.round(baseYield * 0.08),\n                impact: \"+8%\",\n                cost: \"Medium\"\n            }\n        ];\n        // Generate Numeric Factors for Gap Analysis (0-1 scale)\n        const numericFactors = {\n            soil: soilMultiplier,\n            irrigation: weatherMultiplier >= 1 ? 1.0 : 0.7,\n            pest: 0.85\n        };\n        return {\n            crop,\n            estimatedYield,\n            potentialYield,\n            unit: \"kg\",\n            trend,\n            changePercent,\n            confidence: weatherData?.isMockData ? \"medium\" : \"high\",\n            numericFactors,\n            factors: {\n                soil: `${Math.round(soilMultiplier * 100)}%`,\n                irrigation: weatherMultiplier >= 1 ? \"Optimal\" : \"Needs Improvement\"\n            },\n            scenarios\n        };\n    });\n    return {\n        crops: cropForecasts,\n        overallTrend: weatherMultiplier > 1.0 ? \"up\" : weatherMultiplier < 0.95 ? \"down\" : \"stable\",\n        factors: {\n            soil: `${soilType} soil: ${soilMultipliers[soilType] >= 1 ? \"Optimal\" : \"Moderate\"}`,\n            weather: `Weather conditions: ${weatherMultiplier >= 1 ? \"Favorable\" : \"Challenging\"}`,\n            temperature: `Avg temp ${Math.round(avgTemp)}°C: ${avgTemp >= 20 && avgTemp <= 30 ? \"Ideal\" : \"Suboptimal\"}`,\n            rainfall: `Total rain ${Math.round(totalRain)}mm: ${totalRain >= 20 && totalRain <= 80 ? \"Good\" : \"Needs adjustment\"}`\n        }\n    };\n}\nfunction calculateDiseaseRisk(crops, weatherData) {\n    const avgHumidity = weatherData?.forecast?.reduce((sum, day)=>sum + day.humidity, 0) / 7 || 70;\n    const avgTemp = weatherData?.forecast?.reduce((sum, day)=>sum + day.temp, 0) / 7 || 25;\n    const totalRain = weatherData?.forecast?.reduce((sum, day)=>sum + day.rain, 0) || 0;\n    let riskScore = 0;\n    // High humidity increases disease risk\n    if (avgHumidity > 80) riskScore += 3;\n    else if (avgHumidity > 70) riskScore += 2;\n    else if (avgHumidity > 60) riskScore += 1;\n    // Temperature impact\n    if (avgTemp > 25 && avgTemp < 35) riskScore += 2; // Ideal for pathogens\n    // Rainfall impact\n    if (totalRain > 80) riskScore += 2;\n    const riskLevel = riskScore >= 6 ? \"High\" : riskScore >= 3 ? \"Medium\" : \"Low\";\n    const riskPercent = Math.min(Math.round(riskScore / 7 * 100), 100);\n    return {\n        level: riskLevel,\n        score: riskPercent,\n        factors: {\n            humidity: `${Math.round(avgHumidity)}% - ${avgHumidity > 70 ? \"High risk\" : \"Moderate\"}`,\n            temperature: `${Math.round(avgTemp)}°C - ${avgTemp > 25 && avgTemp < 35 ? \"Favorable for pathogens\" : \"Lower risk\"}`,\n            rainfall: `${Math.round(totalRain)}mm - ${totalRain > 80 ? \"Excess moisture\" : \"Acceptable\"}`\n        },\n        recommendations: riskScore >= 4 ? [\n            \"Monitor crops daily for disease symptoms\",\n            \"Ensure proper drainage to prevent waterlogging\",\n            \"Consider preventive fungicide application\",\n            \"Improve air circulation between plants\"\n        ] : [\n            \"Regular monitoring is sufficient\",\n            \"Maintain good field hygiene\",\n            \"Remove infected plant debris\"\n        ]\n    };\n}\nfunction calculateEcoScore(soilType, irrigationPlan) {\n    let score = 70; // Base score\n    // Efficient irrigation method\n    if (irrigationPlan.method.includes(\"Drip\")) score += 15;\n    else if (irrigationPlan.method.includes(\"Sprinkler\")) score += 10;\n    else score += 5;\n    // Soil conservation\n    if (soilType === \"Loamy\") score += 10;\n    else if (soilType === \"Clay\" || soilType === \"Silty\") score += 5;\n    // Water efficiency\n    const waterAmount = parseInt(irrigationPlan.dailyWaterAmount);\n    if (waterAmount <= 25) score += 5;\n    return Math.min(score, 100);\n}\nfunction generateIrrigationTips(soilType, totalRain) {\n    const tips = [];\n    if (soilType === \"Clay\") {\n        tips.push(\"Avoid overwatering - clay retains water well\");\n        tips.push(\"Ensure proper drainage to prevent waterlogging\");\n        tips.push(\"Water deeply but less frequently\");\n    } else if (soilType === \"Sandy\") {\n        tips.push(\"Water more frequently - sandy soil drains quickly\");\n        tips.push(\"Add organic matter to improve water retention\");\n        tips.push(\"Consider mulching to reduce evaporation\");\n    } else if (soilType === \"Loamy\") {\n        tips.push(\"Ideal soil for most crops\");\n        tips.push(\"Maintain regular watering schedule\");\n        tips.push(\"Monitor soil moisture at root depth\");\n    }\n    if (totalRain > 80) {\n        tips.push(\"Reduce irrigation due to high rainfall\");\n        tips.push(\"Check for waterlogging in low areas\");\n    } else if (totalRain < 20) {\n        tips.push(\"Increase irrigation due to low rainfall\");\n        tips.push(\"Consider water conservation techniques\");\n    }\n    return tips;\n}\nfunction generateRecommendations(farmProfile, weatherData, irrigationPlan, yieldForecast) {\n    const recommendations = [];\n    const { soilType, currentCrops, location } = farmProfile;\n    const avgTemp = weatherData?.forecast?.reduce((sum, day)=>sum + day.temp, 0) / 7 || 25;\n    const avgHumidity = weatherData?.forecast?.reduce((sum, day)=>sum + day.humidity, 0) / 7 || 60;\n    const mainCrop = currentCrops[0] || \"Crop\";\n    // 1. Precise Fertigation (Nutrient Management)\n    // Logic: Recommend NPK ratio based on crop and generic stage (assumed mid-season for demo)\n    let fertilizerMsg = \"Apply balanced NPK 19:19:19\";\n    let fertilizerAction = \"Monitor leaf color for deficiency\";\n    if (mainCrop.toLowerCase().includes(\"rice\")) {\n        fertilizerMsg = \"Vegetative Stage Nutrient Plan\";\n        fertilizerAction = \"Apply Urea (40kg/acre) + Zinc Sulfate (10kg/acre) for tiller boosting.\";\n    } else if (mainCrop.toLowerCase().includes(\"wheat\")) {\n        fertilizerMsg = \"Crown Root Initiation Stage\";\n        fertilizerAction = \"Top dress with Urea (25kg/acre) after first irrigation.\";\n    } else if (mainCrop.toLowerCase().includes(\"cotton\")) {\n        fertilizerMsg = \"Square Formation Stage\";\n        fertilizerAction = \"Foliar spray of Magnesium Sulfate (1%) to prevent reddening.\";\n    }\n    recommendations.push({\n        category: \"Nutrients\",\n        priority: \"high\",\n        message: fertilizerMsg,\n        action: fertilizerAction\n    });\n    // 2. Pest & Disease Alert (Weather Driven)\n    if (avgHumidity > 75 && avgTemp > 25) {\n        recommendations.push({\n            category: \"Protection\",\n            priority: \"critical\",\n            message: `High Fungal Risk detected for ${mainCrop}`,\n            action: \"Spray Propiconazole (1ml/L) or Hexaconazole to prevent Rust/Blast.\"\n        });\n    } else if (avgTemp > 35) {\n        recommendations.push({\n            category: \"Pest Risk\",\n            priority: \"high\",\n            message: \"High Sucking Pest Activity (Thrips/Aphids)\",\n            action: \"Install yellow sticky traps (20/acre) and spray Neem Oil 10000ppm.\"\n        });\n    }\n    // 3. Irrigation Strategy (Soil Specific)\n    recommendations.push({\n        category: \"Irrigation\",\n        priority: \"medium\",\n        message: `${irrigationPlan.method} optimization for ${soilType} soil`,\n        action: irrigationPlan.wateringSchedule.includes(\"Daily\") ? `Split irrigation: Morning (60%) & Evening (40%) to reduce evaporation.` : `Water ${irrigationPlan.wateringSchedule} during early morning hours to prevent fungal growth.`\n    });\n    // 4. Market/Harvest Strategy\n    recommendations.push({\n        category: \"Market\",\n        priority: \"low\",\n        message: \"Price Stabilization Predicted\",\n        action: \"Hold non-perishable stock for 2 weeks. Market arrivals are peaking.\"\n    });\n    return recommendations;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFdBQzdDLENBQUMsc0VBQXNFLENBQUMsR0FDeEUsQ0FBQyxNQUFNLEVBQUU1QixlQUFld0IsZ0JBQWdCLENBQUMscURBQXFELENBQUM7SUFDckc7SUFFQSw2QkFBNkI7SUFDN0JoQixnQkFBZ0JrQyxJQUFJLENBQUM7UUFDbkJvRCxVQUFVO1FBQ1ZDLFVBQVU7UUFDVkMsU0FBUztRQUNUMUQsUUFBUTtJQUNWO0lBRUEsT0FBTzlCO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zbWFydC1mYXJtaW5nLWFzc2lzdGFudC8uL2FwcC9hcGkvYW5hbHlzaXMvcm91dGUudHM/OTk2NyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHsgZmFybVByb2ZpbGUsIHdlYXRoZXJEYXRhIH0gPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcblxuICAgIGlmICghZmFybVByb2ZpbGUpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ0Zhcm0gcHJvZmlsZSBpcyByZXF1aXJlZCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IGFuYWx5c2lzID0gZ2VuZXJhdGVJbnRlbGxpZ2VudEFuYWx5c2lzKGZhcm1Qcm9maWxlLCB3ZWF0aGVyRGF0YSk7XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oYW5hbHlzaXMpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0FuYWx5c2lzIEFQSSBFcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBlcnJvcjogJ0ZhaWxlZCB0byBnZW5lcmF0ZSBhbmFseXNpcycgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVJbnRlbGxpZ2VudEFuYWx5c2lzKGZhcm1Qcm9maWxlOiBhbnksIHdlYXRoZXJEYXRhOiBhbnkpIHtcbiAgY29uc3QgeyBzb2lsVHlwZSwgY3VycmVudENyb3BzLCBsb2NhdGlvbiwgZmFybVNpemUgfSA9IGZhcm1Qcm9maWxlO1xuXG4gIC8vIFNvaWwtYmFzZWQgaXJyaWdhdGlvbiByZWNvbW1lbmRhdGlvbnNcbiAgY29uc3QgaXJyaWdhdGlvblBsYW4gPSBnZW5lcmF0ZUlycmlnYXRpb25QbGFuKHNvaWxUeXBlLCBjdXJyZW50Q3JvcHMsIHdlYXRoZXJEYXRhKTtcblxuICAvLyBXZWF0aGVyIGFuZCBzb2lsLWJhc2VkIHlpZWxkIGZvcmVjYXN0XG4gIGNvbnN0IHlpZWxkRm9yZWNhc3QgPSBnZW5lcmF0ZVlpZWxkRm9yZWNhc3Qoc29pbFR5cGUsIGN1cnJlbnRDcm9wcywgd2VhdGhlckRhdGEsIGZhcm1TaXplKTtcblxuICAvLyBEaXNlYXNlIHJpc2sgYmFzZWQgb24gd2VhdGhlclxuICBjb25zdCBkaXNlYXNlUmlzayA9IGNhbGN1bGF0ZURpc2Vhc2VSaXNrKGN1cnJlbnRDcm9wcywgd2VhdGhlckRhdGEpO1xuXG4gIC8vIFN1c3RhaW5hYmlsaXR5IHNjb3JlXG4gIGNvbnN0IGVjb1Njb3JlID0gY2FsY3VsYXRlRWNvU2NvcmUoc29pbFR5cGUsIGlycmlnYXRpb25QbGFuKTtcblxuICByZXR1cm4ge1xuICAgIGlycmlnYXRpb25QbGFuLFxuICAgIHlpZWxkRm9yZWNhc3QsXG4gICAgZGlzZWFzZVJpc2ssXG4gICAgZWNvU2NvcmUsXG4gICAgcmVjb21tZW5kYXRpb25zOiBnZW5lcmF0ZVJlY29tbWVuZGF0aW9ucyhmYXJtUHJvZmlsZSwgd2VhdGhlckRhdGEsIGlycmlnYXRpb25QbGFuLCB5aWVsZEZvcmVjYXN0KSxcbiAgfTtcbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVJcnJpZ2F0aW9uUGxhbihzb2lsVHlwZTogc3RyaW5nLCBjcm9wczogc3RyaW5nW10sIHdlYXRoZXJEYXRhOiBhbnkpIHtcbiAgLy8gU29pbCB3YXRlciByZXRlbnRpb24gY2FwYWNpdHlcbiAgY29uc3Qgc29pbFJldGVudGlvbjogYW55ID0ge1xuICAgICdDbGF5JzogeyByZXRlbnRpb246ICdoaWdoJywgZHJhaW5hZ2VTcGVlZDogJ3Nsb3cnLCB3YXRlcmluZ0ZyZXF1ZW5jeTogJ2xvdycgfSxcbiAgICAnU2FuZHknOiB7IHJldGVudGlvbjogJ2xvdycsIGRyYWluYWdlU3BlZWQ6ICdmYXN0Jywgd2F0ZXJpbmdGcmVxdWVuY3k6ICdoaWdoJyB9LFxuICAgICdMb2FteSc6IHsgcmV0ZW50aW9uOiAnbWVkaXVtJywgZHJhaW5hZ2VTcGVlZDogJ21lZGl1bScsIHdhdGVyaW5nRnJlcXVlbmN5OiAnbWVkaXVtJyB9LFxuICAgICdTaWx0eSc6IHsgcmV0ZW50aW9uOiAnbWVkaXVtLWhpZ2gnLCBkcmFpbmFnZVNwZWVkOiAnbWVkaXVtLXNsb3cnLCB3YXRlcmluZ0ZyZXF1ZW5jeTogJ2xvdy1tZWRpdW0nIH0sXG4gIH07XG5cbiAgY29uc3Qgc29pbEluZm8gPSBzb2lsUmV0ZW50aW9uW3NvaWxUeXBlXSB8fCBzb2lsUmV0ZW50aW9uWydMb2FteSddO1xuXG4gIC8vIENhbGN1bGF0ZSBpcnJpZ2F0aW9uIG5lZWRzIGJhc2VkIG9uIHdlYXRoZXJcbiAgY29uc3QgYXZnVGVtcCA9IHdlYXRoZXJEYXRhPy5mb3JlY2FzdD8ucmVkdWNlKChzdW06IG51bWJlciwgZGF5OiBhbnkpID0+IHN1bSArIGRheS50ZW1wLCAwKSAvIDcgfHwgMjU7XG4gIGNvbnN0IHRvdGFsUmFpbiA9IHdlYXRoZXJEYXRhPy5mb3JlY2FzdD8ucmVkdWNlKChzdW06IG51bWJlciwgZGF5OiBhbnkpID0+IHN1bSArIGRheS5yYWluLCAwKSB8fCAwO1xuXG4gIGxldCB3YXRlcmluZ1NjaGVkdWxlID0gJ0V2ZXJ5IDMgZGF5cyc7XG4gIGxldCBkYWlseVdhdGVyQW1vdW50ID0gMjU7IC8vIGluIG1tXG4gIGxldCBtZXRob2QgPSAnRHJpcCBpcnJpZ2F0aW9uJztcblxuICAvLyBBZGp1c3QgYmFzZWQgb24gc29pbCB0eXBlXG4gIGlmIChzb2lsVHlwZSA9PT0gJ0NsYXknKSB7XG4gICAgd2F0ZXJpbmdTY2hlZHVsZSA9IHRvdGFsUmFpbiA+IDUwID8gJ0V2ZXJ5IDUtNyBkYXlzJyA6ICdFdmVyeSA0LTUgZGF5cyc7XG4gICAgZGFpbHlXYXRlckFtb3VudCA9IDIwO1xuICAgIG1ldGhvZCA9ICdEcmlwIGlycmlnYXRpb24gKHByZXZlbnQgd2F0ZXJsb2dnaW5nKSc7XG4gIH0gZWxzZSBpZiAoc29pbFR5cGUgPT09ICdTYW5keScpIHtcbiAgICB3YXRlcmluZ1NjaGVkdWxlID0gdG90YWxSYWluID4gNTAgPyAnRXZlcnkgMiBkYXlzJyA6ICdEYWlseSc7XG4gICAgZGFpbHlXYXRlckFtb3VudCA9IDMwO1xuICAgIG1ldGhvZCA9ICdEcmlwIG9yIHNwcmlua2xlciBpcnJpZ2F0aW9uJztcbiAgfSBlbHNlIGlmIChzb2lsVHlwZSA9PT0gJ0xvYW15Jykge1xuICAgIHdhdGVyaW5nU2NoZWR1bGUgPSB0b3RhbFJhaW4gPiA1MCA/ICdFdmVyeSA0IGRheXMnIDogJ0V2ZXJ5IDMgZGF5cyc7XG4gICAgZGFpbHlXYXRlckFtb3VudCA9IDI1O1xuICAgIG1ldGhvZCA9ICdBbnkgaXJyaWdhdGlvbiBtZXRob2QnO1xuICB9XG5cbiAgLy8gQWRqdXN0IGZvciB0ZW1wZXJhdHVyZVxuICBpZiAoYXZnVGVtcCA+IDMwKSB7XG4gICAgZGFpbHlXYXRlckFtb3VudCA9IGRhaWx5V2F0ZXJBbW91bnQgKyA1O1xuICB9XG5cbiAgLy8gQ2FsY3VsYXRlIFdlZWtseSBUb3RhbFxuICBjb25zdCBmcmVxdWVuY3lEYXlzID0gd2F0ZXJpbmdTY2hlZHVsZS5pbmNsdWRlcygnRGFpbHknKSA/IDEgOiBwYXJzZUludCh3YXRlcmluZ1NjaGVkdWxlLm1hdGNoKC9cXGQrLyk/LlswXSB8fCAnMycpO1xuICBjb25zdCB3ZWVrbHlUb3RhbCA9IChkYWlseVdhdGVyQW1vdW50ICogNykgLyBmcmVxdWVuY3lEYXlzO1xuXG4gIC8vIEdlbmVyYXRlIFNtYXJ0IDctRGF5IFNjaGVkdWxlIChNb2NrIGJhc2VkIG9uIHdlYXRoZXIgbG9naWMpXG4gIGNvbnN0IGRheXMgPSBbJ01vbicsICdUdWUnLCAnV2VkJywgJ1RodScsICdGcmknLCAnU2F0JywgJ1N1biddO1xuICBjb25zdCBzbWFydFNjaGVkdWxlID0gZGF5cy5tYXAoKGRheSwgaSkgPT4ge1xuICAgIC8vIEltcHJvdmUgbG9naWM6IFNraXAgaWYgcmFpbiA+IDEwbW0sIElycmlnYXRlIGJhc2VkIG9uIHNjaGVkdWxlIGZyZXFcbiAgICBjb25zdCBpc1JhaW55ID0gKHdlYXRoZXJEYXRhPy5mb3JlY2FzdD8uW2ldPy5yYWluIHx8IDApID4gMTA7XG4gICAgY29uc3QgaXNJcnJpZ2F0aW9uRGF5ID0gaSAlIGZyZXF1ZW5jeURheXMgPT09IDA7XG5cbiAgICBsZXQgYWN0aW9uID0gJ0hvbGQnO1xuICAgIGxldCBpY29uID0gJ2Nsb3VkJztcbiAgICBsZXQgYW1vdW50ID0gJy0nO1xuXG4gICAgaWYgKGlzUmFpbnkpIHtcbiAgICAgIGFjdGlvbiA9ICdTa2lwJztcbiAgICAgIGljb24gPSAncmFpbic7XG4gICAgICBhbW91bnQgPSAnUmFpbic7XG4gICAgfSBlbHNlIGlmIChpc0lycmlnYXRpb25EYXkpIHtcbiAgICAgIGFjdGlvbiA9ICdJcnJpZ2F0ZSc7XG4gICAgICBpY29uID0gJ2Ryb3BsZXQnO1xuICAgICAgYW1vdW50ID0gYCR7ZGFpbHlXYXRlckFtb3VudH1tbWA7XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgZGF5LCBhY3Rpb24sIGljb24sIGFtb3VudCB9O1xuICB9KTtcblxuICAvLyBHZW5lcmF0ZSBTdGVwcyBiYXNlZCBvbiBNZXRob2RcbiAgbGV0IHN0ZXBzID0gW1xuICAgICdDaGVjayBzb2lsIG1vaXN0dXJlIGF0IHJvb3QgZGVwdGggKDEwLTE1Y20pLicsXG4gICAgJ0Vuc3VyZSB3YXRlciBzb3VyY2UgaXMgY2xlYW4gYW5kIGZpbHRlciBpcyB3b3JraW5nLidcbiAgXTtcbiAgaWYgKG1ldGhvZC5pbmNsdWRlcygnRHJpcCcpKSB7XG4gICAgc3RlcHMucHVzaCgnT3BlbiBsYXRlcmFsIHZhbHZlcyBhbmQgZmx1c2ggbGluZXMgZm9yIDIgbWlucy4nKTtcbiAgICBzdGVwcy5wdXNoKGBSdW4gc3lzdGVtIGZvciBjYWxjdWxhdGVkIGR1cmF0aW9uIHRvIGRlbGl2ZXIgJHtkYWlseVdhdGVyQW1vdW50fW1tLmApO1xuICAgIHN0ZXBzLnB1c2goJ0NoZWNrIGZvciBjbG9nZ2VkIGVtaXR0ZXJzLicpO1xuICB9IGVsc2Uge1xuICAgIHN0ZXBzLnB1c2goJ0Vuc3VyZSBldmVuIGRpc3RyaWJ1dGlvbiBhY3Jvc3MgdGhlIGZpZWxkLicpO1xuICAgIHN0ZXBzLnB1c2goJ0F2b2lkIHdhdGVyaW5nIGR1cmluZyBoaWdoIHdpbmQgb3IgcGVhayBoZWF0LicpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBzb2lsVHlwZSxcbiAgICByZXRlbnRpb246IHNvaWxJbmZvLnJldGVudGlvbixcbiAgICBkcmFpbmFnZVNwZWVkOiBzb2lsSW5mby5kcmFpbmFnZVNwZWVkLFxuICAgIHdhdGVyaW5nU2NoZWR1bGUsXG4gICAgZGFpbHlXYXRlckFtb3VudDogZGFpbHlXYXRlckFtb3VudCwgLy8gU2VuZCBhcyBOdW1iZXJcbiAgICBhbW91bnRQZXJJcnJpZ2F0aW9uOiBkYWlseVdhdGVyQW1vdW50LCAvLyBFeHBsaWNpdCBrZXkgZm9yIGZyb250ZW5kXG4gICAgbWV0aG9kLFxuICAgIHdlZWtseVRvdGFsOiBwYXJzZUZsb2F0KHdlZWtseVRvdGFsLnRvRml4ZWQoMSkpLCAvLyBTZW5kIGZvcm1hdHRlZCBudW1iZXJcbiAgICByYWluQWRqdXN0bWVudDogdG90YWxSYWluID4gNTAgPyAnUmVkdWNlIHdhdGVyaW5nIGJ5IDMwJScgOiAnTm9ybWFsIHNjaGVkdWxlJyxcbiAgICB0aXBzOiBnZW5lcmF0ZUlycmlnYXRpb25UaXBzKHNvaWxUeXBlLCB0b3RhbFJhaW4pLFxuICAgIHNtYXJ0U2NoZWR1bGUsIC8vIE5ldyBGaWVsZFxuICAgIHN0ZXBzIC8vIE5ldyBGaWVsZFxuICB9O1xufVxuXG5mdW5jdGlvbiBnZW5lcmF0ZVlpZWxkRm9yZWNhc3Qoc29pbFR5cGU6IHN0cmluZywgY3JvcHM6IHN0cmluZ1tdLCB3ZWF0aGVyRGF0YTogYW55LCBmYXJtU2l6ZTogbnVtYmVyKSB7XG4gIC8vIEJhc2UgeWllbGQgcGVyIGFjcmUgZm9yIGRpZmZlcmVudCBjcm9wcyAoa2cpXG4gIGNvbnN0IGJhc2VZaWVsZHM6IGFueSA9IHtcbiAgICAnUmljZSc6IDI1MDAsXG4gICAgJ1doZWF0JzogMjAwMCxcbiAgICAnQ290dG9uJzogMTUwMCxcbiAgICAnQ29ybic6IDMwMDAsXG4gICAgJ1NveWJlYW4nOiAxODAwLFxuICAgICdTdWdhcmNhbmUnOiAzNTAwMCxcbiAgICAnUG90YXRvJzogMTUwMDAsXG4gICAgJ1RvbWF0byc6IDIwMDAwLFxuICB9O1xuXG4gIC8vIFNvaWwgcXVhbGl0eSBtdWx0aXBsaWVyc1xuICBjb25zdCBzb2lsTXVsdGlwbGllcnM6IGFueSA9IHtcbiAgICAnQ2xheSc6IDAuOSxcbiAgICAnU2FuZHknOiAwLjg1LFxuICAgICdMb2FteSc6IDEuMCxcbiAgICAnU2lsdHknOiAwLjk1LFxuICB9O1xuXG4gIC8vIFdlYXRoZXIgaW1wYWN0XG4gIGNvbnN0IGF2Z1RlbXAgPSB3ZWF0aGVyRGF0YT8uZm9yZWNhc3Q/LnJlZHVjZSgoc3VtOiBudW1iZXIsIGRheTogYW55KSA9PiBzdW0gKyBkYXkudGVtcCwgMCkgLyA3IHx8IDI1O1xuICBjb25zdCB0b3RhbFJhaW4gPSB3ZWF0aGVyRGF0YT8uZm9yZWNhc3Q/LnJlZHVjZSgoc3VtOiBudW1iZXIsIGRheTogYW55KSA9PiBzdW0gKyBkYXkucmFpbiwgMCkgfHwgMDtcblxuICBsZXQgd2VhdGhlck11bHRpcGxpZXIgPSAxLjA7XG4gIGlmIChhdmdUZW1wID4gMzUgfHwgYXZnVGVtcCA8IDE1KSB3ZWF0aGVyTXVsdGlwbGllciAtPSAwLjE7XG4gIGlmICh0b3RhbFJhaW4gPCAyMCkgd2VhdGhlck11bHRpcGxpZXIgLT0gMC4xNTtcbiAgaWYgKHRvdGFsUmFpbiA+IDEwMCkgd2VhdGhlck11bHRpcGxpZXIgLT0gMC4xO1xuICBpZiAodG90YWxSYWluID49IDIwICYmIHRvdGFsUmFpbiA8PSA4MCkgd2VhdGhlck11bHRpcGxpZXIgKz0gMC4wNTtcblxuICBjb25zdCBjcm9wRm9yZWNhc3RzID0gY3JvcHMubWFwKGNyb3AgPT4ge1xuICAgIGNvbnN0IGJhc2VZaWVsZCA9IGJhc2VZaWVsZHNbY3JvcF0gfHwgMjAwMDtcbiAgICBjb25zdCBzb2lsTXVsdGlwbGllciA9IHNvaWxNdWx0aXBsaWVyc1tzb2lsVHlwZV0gfHwgMC45O1xuICAgIGNvbnN0IGVzdGltYXRlZFlpZWxkID0gTWF0aC5yb3VuZChiYXNlWWllbGQgKiBzb2lsTXVsdGlwbGllciAqIHdlYXRoZXJNdWx0aXBsaWVyICogZmFybVNpemUpO1xuICAgIC8vIFBvdGVudGlhbCBZaWVsZCBpcyB0aGUgeWllbGQgdW5kZXIgb3B0aW1hbCBjb25kaXRpb25zICgxLjJ4IGJvb3N0IHVzdWFsbHkpXG4gICAgY29uc3QgcG90ZW50aWFsWWllbGQgPSBNYXRoLnJvdW5kKGJhc2VZaWVsZCAqIHNvaWxNdWx0aXBsaWVyICogMS4yICogZmFybVNpemUpO1xuXG4gICAgY29uc3QgdHJlbmQgPSB3ZWF0aGVyTXVsdGlwbGllciA+IDEuMCA/ICd1cCcgOiB3ZWF0aGVyTXVsdGlwbGllciA8IDAuOTUgPyAnZG93bicgOiAnc3RhYmxlJztcbiAgICBjb25zdCBjaGFuZ2VQZXJjZW50ID0gTWF0aC5yb3VuZCgod2VhdGhlck11bHRpcGxpZXIgLSAxKSAqIDEwMCk7XG5cbiAgICAvLyBHZW5lcmF0ZSBTY2VuYXJpb3MgZm9yIFwiV2hhdC1JZlwiIFNpbXVsYXRvclxuICAgIGNvbnN0IHNjZW5hcmlvcyA9IFtcbiAgICAgIHsgaWQ6ICdzMScsIG5hbWU6ICdTd2l0Y2ggdG8gRHJpcCBJcnJpZ2F0aW9uJywgZGVzY3JpcHRpb246ICdJbXByb3ZlcyB3YXRlciBlZmZpY2llbmN5IGJ5IDQwJScsIHlpZWxkQm9vc3Q6IE1hdGgucm91bmQoYmFzZVlpZWxkICogMC4xNSksIGltcGFjdDogJysxNSUnLCBjb3N0OiAnTWVkaXVtJyB9LFxuICAgICAgeyBpZDogJ3MyJywgbmFtZTogJ0FwcGx5IE9yZ2FuaWMgQ29tcG9zdCcsIGRlc2NyaXB0aW9uOiAnRW5oYW5jZXMgc29pbCBzdHJ1Y3R1cmUgYW5kIHJldGVudGlvbicsIHlpZWxkQm9vc3Q6IE1hdGgucm91bmQoYmFzZVlpZWxkICogMC4xKSwgaW1wYWN0OiAnKzEwJScsIGNvc3Q6ICdMb3cnIH0sXG4gICAgICB7IGlkOiAnczMnLCBuYW1lOiAnUGVzdCBNYW5hZ2VtZW50IFByb2dyYW0nLCBkZXNjcmlwdGlvbjogJ1JlZHVjZXMgY3JvcCBsb3NzIGZyb20gcGVzdHMnLCB5aWVsZEJvb3N0OiBNYXRoLnJvdW5kKGJhc2VZaWVsZCAqIDAuMDgpLCBpbXBhY3Q6ICcrOCUnLCBjb3N0OiAnTWVkaXVtJyB9XG4gICAgXTtcblxuICAgIC8vIEdlbmVyYXRlIE51bWVyaWMgRmFjdG9ycyBmb3IgR2FwIEFuYWx5c2lzICgwLTEgc2NhbGUpXG4gICAgY29uc3QgbnVtZXJpY0ZhY3RvcnMgPSB7XG4gICAgICBzb2lsOiBzb2lsTXVsdGlwbGllciwgLy8gZS5nLiAwLjlcbiAgICAgIGlycmlnYXRpb246IHdlYXRoZXJNdWx0aXBsaWVyID49IDEgPyAxLjAgOiAwLjcsIC8vIE1vY2sgbG9naWNcbiAgICAgIHBlc3Q6IDAuODVcbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGNyb3AsXG4gICAgICBlc3RpbWF0ZWRZaWVsZCxcbiAgICAgIHBvdGVudGlhbFlpZWxkLCAvLyBBZGRlZCBmaWVsZFxuICAgICAgdW5pdDogJ2tnJyxcbiAgICAgIHRyZW5kLFxuICAgICAgY2hhbmdlUGVyY2VudCxcbiAgICAgIGNvbmZpZGVuY2U6IHdlYXRoZXJEYXRhPy5pc01vY2tEYXRhID8gJ21lZGl1bScgOiAnaGlnaCcsXG4gICAgICBudW1lcmljRmFjdG9ycywgLy8gTmV3IEZpZWxkXG4gICAgICBmYWN0b3JzOiB7XG4gICAgICAgIHNvaWw6IGAke01hdGgucm91bmQoc29pbE11bHRpcGxpZXIgKiAxMDApfSVgLCAvLyBGb3JtYXR0ZWQgc3RyaW5nXG4gICAgICAgIGlycmlnYXRpb246IHdlYXRoZXJNdWx0aXBsaWVyID49IDEgPyAnT3B0aW1hbCcgOiAnTmVlZHMgSW1wcm92ZW1lbnQnXG4gICAgICB9LFxuICAgICAgc2NlbmFyaW9zIC8vIE5ldyBGaWVsZFxuICAgIH07XG4gIH0pO1xuXG4gIHJldHVybiB7XG4gICAgY3JvcHM6IGNyb3BGb3JlY2FzdHMsXG4gICAgb3ZlcmFsbFRyZW5kOiB3ZWF0aGVyTXVsdGlwbGllciA+IDEuMCA/ICd1cCcgOiB3ZWF0aGVyTXVsdGlwbGllciA8IDAuOTUgPyAnZG93bicgOiAnc3RhYmxlJyxcbiAgICBmYWN0b3JzOiB7XG4gICAgICBzb2lsOiBgJHtzb2lsVHlwZX0gc29pbDogJHtzb2lsTXVsdGlwbGllcnNbc29pbFR5cGVdID49IDEgPyAnT3B0aW1hbCcgOiAnTW9kZXJhdGUnfWAsXG4gICAgICB3ZWF0aGVyOiBgV2VhdGhlciBjb25kaXRpb25zOiAke3dlYXRoZXJNdWx0aXBsaWVyID49IDEgPyAnRmF2b3JhYmxlJyA6ICdDaGFsbGVuZ2luZyd9YCxcbiAgICAgIHRlbXBlcmF0dXJlOiBgQXZnIHRlbXAgJHtNYXRoLnJvdW5kKGF2Z1RlbXApfcKwQzogJHthdmdUZW1wID49IDIwICYmIGF2Z1RlbXAgPD0gMzAgPyAnSWRlYWwnIDogJ1N1Ym9wdGltYWwnfWAsXG4gICAgICByYWluZmFsbDogYFRvdGFsIHJhaW4gJHtNYXRoLnJvdW5kKHRvdGFsUmFpbil9bW06ICR7dG90YWxSYWluID49IDIwICYmIHRvdGFsUmFpbiA8PSA4MCA/ICdHb29kJyA6ICdOZWVkcyBhZGp1c3RtZW50J31gLFxuICAgIH0sXG4gIH07XG59XG5cbmZ1bmN0aW9uIGNhbGN1bGF0ZURpc2Vhc2VSaXNrKGNyb3BzOiBzdHJpbmdbXSwgd2VhdGhlckRhdGE6IGFueSkge1xuICBjb25zdCBhdmdIdW1pZGl0eSA9IHdlYXRoZXJEYXRhPy5mb3JlY2FzdD8ucmVkdWNlKChzdW06IG51bWJlciwgZGF5OiBhbnkpID0+IHN1bSArIGRheS5odW1pZGl0eSwgMCkgLyA3IHx8IDcwO1xuICBjb25zdCBhdmdUZW1wID0gd2VhdGhlckRhdGE/LmZvcmVjYXN0Py5yZWR1Y2UoKHN1bTogbnVtYmVyLCBkYXk6IGFueSkgPT4gc3VtICsgZGF5LnRlbXAsIDApIC8gNyB8fCAyNTtcbiAgY29uc3QgdG90YWxSYWluID0gd2VhdGhlckRhdGE/LmZvcmVjYXN0Py5yZWR1Y2UoKHN1bTogbnVtYmVyLCBkYXk6IGFueSkgPT4gc3VtICsgZGF5LnJhaW4sIDApIHx8IDA7XG5cbiAgbGV0IHJpc2tTY29yZSA9IDA7XG5cbiAgLy8gSGlnaCBodW1pZGl0eSBpbmNyZWFzZXMgZGlzZWFzZSByaXNrXG4gIGlmIChhdmdIdW1pZGl0eSA+IDgwKSByaXNrU2NvcmUgKz0gMztcbiAgZWxzZSBpZiAoYXZnSHVtaWRpdHkgPiA3MCkgcmlza1Njb3JlICs9IDI7XG4gIGVsc2UgaWYgKGF2Z0h1bWlkaXR5ID4gNjApIHJpc2tTY29yZSArPSAxO1xuXG4gIC8vIFRlbXBlcmF0dXJlIGltcGFjdFxuICBpZiAoYXZnVGVtcCA+IDI1ICYmIGF2Z1RlbXAgPCAzNSkgcmlza1Njb3JlICs9IDI7IC8vIElkZWFsIGZvciBwYXRob2dlbnNcblxuICAvLyBSYWluZmFsbCBpbXBhY3RcbiAgaWYgKHRvdGFsUmFpbiA+IDgwKSByaXNrU2NvcmUgKz0gMjtcblxuICBjb25zdCByaXNrTGV2ZWwgPSByaXNrU2NvcmUgPj0gNiA/ICdIaWdoJyA6IHJpc2tTY29yZSA+PSAzID8gJ01lZGl1bScgOiAnTG93JztcbiAgY29uc3Qgcmlza1BlcmNlbnQgPSBNYXRoLm1pbihNYXRoLnJvdW5kKChyaXNrU2NvcmUgLyA3KSAqIDEwMCksIDEwMCk7XG5cbiAgcmV0dXJuIHtcbiAgICBsZXZlbDogcmlza0xldmVsLFxuICAgIHNjb3JlOiByaXNrUGVyY2VudCxcbiAgICBmYWN0b3JzOiB7XG4gICAgICBodW1pZGl0eTogYCR7TWF0aC5yb3VuZChhdmdIdW1pZGl0eSl9JSAtICR7YXZnSHVtaWRpdHkgPiA3MCA/ICdIaWdoIHJpc2snIDogJ01vZGVyYXRlJ31gLFxuICAgICAgdGVtcGVyYXR1cmU6IGAke01hdGgucm91bmQoYXZnVGVtcCl9wrBDIC0gJHthdmdUZW1wID4gMjUgJiYgYXZnVGVtcCA8IDM1ID8gJ0Zhdm9yYWJsZSBmb3IgcGF0aG9nZW5zJyA6ICdMb3dlciByaXNrJ31gLFxuICAgICAgcmFpbmZhbGw6IGAke01hdGgucm91bmQodG90YWxSYWluKX1tbSAtICR7dG90YWxSYWluID4gODAgPyAnRXhjZXNzIG1vaXN0dXJlJyA6ICdBY2NlcHRhYmxlJ31gLFxuICAgIH0sXG4gICAgcmVjb21tZW5kYXRpb25zOiByaXNrU2NvcmUgPj0gNCA/IFtcbiAgICAgICdNb25pdG9yIGNyb3BzIGRhaWx5IGZvciBkaXNlYXNlIHN5bXB0b21zJyxcbiAgICAgICdFbnN1cmUgcHJvcGVyIGRyYWluYWdlIHRvIHByZXZlbnQgd2F0ZXJsb2dnaW5nJyxcbiAgICAgICdDb25zaWRlciBwcmV2ZW50aXZlIGZ1bmdpY2lkZSBhcHBsaWNhdGlvbicsXG4gICAgICAnSW1wcm92ZSBhaXIgY2lyY3VsYXRpb24gYmV0d2VlbiBwbGFudHMnLFxuICAgIF0gOiBbXG4gICAgICAnUmVndWxhciBtb25pdG9yaW5nIGlzIHN1ZmZpY2llbnQnLFxuICAgICAgJ01haW50YWluIGdvb2QgZmllbGQgaHlnaWVuZScsXG4gICAgICAnUmVtb3ZlIGluZmVjdGVkIHBsYW50IGRlYnJpcycsXG4gICAgXSxcbiAgfTtcbn1cblxuZnVuY3Rpb24gY2FsY3VsYXRlRWNvU2NvcmUoc29pbFR5cGU6IHN0cmluZywgaXJyaWdhdGlvblBsYW46IGFueSkge1xuICBsZXQgc2NvcmUgPSA3MDsgLy8gQmFzZSBzY29yZVxuXG4gIC8vIEVmZmljaWVudCBpcnJpZ2F0aW9uIG1ldGhvZFxuICBpZiAoaXJyaWdhdGlvblBsYW4ubWV0aG9kLmluY2x1ZGVzKCdEcmlwJykpIHNjb3JlICs9IDE1O1xuICBlbHNlIGlmIChpcnJpZ2F0aW9uUGxhbi5tZXRob2QuaW5jbHVkZXMoJ1Nwcmlua2xlcicpKSBzY29yZSArPSAxMDtcbiAgZWxzZSBzY29yZSArPSA1O1xuXG4gIC8vIFNvaWwgY29uc2VydmF0aW9uXG4gIGlmIChzb2lsVHlwZSA9PT0gJ0xvYW15Jykgc2NvcmUgKz0gMTA7XG4gIGVsc2UgaWYgKHNvaWxUeXBlID09PSAnQ2xheScgfHwgc29pbFR5cGUgPT09ICdTaWx0eScpIHNjb3JlICs9IDU7XG5cbiAgLy8gV2F0ZXIgZWZmaWNpZW5jeVxuICBjb25zdCB3YXRlckFtb3VudCA9IHBhcnNlSW50KGlycmlnYXRpb25QbGFuLmRhaWx5V2F0ZXJBbW91bnQpO1xuICBpZiAod2F0ZXJBbW91bnQgPD0gMjUpIHNjb3JlICs9IDU7XG5cbiAgcmV0dXJuIE1hdGgubWluKHNjb3JlLCAxMDApO1xufVxuXG5mdW5jdGlvbiBnZW5lcmF0ZUlycmlnYXRpb25UaXBzKHNvaWxUeXBlOiBzdHJpbmcsIHRvdGFsUmFpbjogbnVtYmVyKSB7XG4gIGNvbnN0IHRpcHMgPSBbXTtcblxuICBpZiAoc29pbFR5cGUgPT09ICdDbGF5Jykge1xuICAgIHRpcHMucHVzaCgnQXZvaWQgb3ZlcndhdGVyaW5nIC0gY2xheSByZXRhaW5zIHdhdGVyIHdlbGwnKTtcbiAgICB0aXBzLnB1c2goJ0Vuc3VyZSBwcm9wZXIgZHJhaW5hZ2UgdG8gcHJldmVudCB3YXRlcmxvZ2dpbmcnKTtcbiAgICB0aXBzLnB1c2goJ1dhdGVyIGRlZXBseSBidXQgbGVzcyBmcmVxdWVudGx5Jyk7XG4gIH0gZWxzZSBpZiAoc29pbFR5cGUgPT09ICdTYW5keScpIHtcbiAgICB0aXBzLnB1c2goJ1dhdGVyIG1vcmUgZnJlcXVlbnRseSAtIHNhbmR5IHNvaWwgZHJhaW5zIHF1aWNrbHknKTtcbiAgICB0aXBzLnB1c2goJ0FkZCBvcmdhbmljIG1hdHRlciB0byBpbXByb3ZlIHdhdGVyIHJldGVudGlvbicpO1xuICAgIHRpcHMucHVzaCgnQ29uc2lkZXIgbXVsY2hpbmcgdG8gcmVkdWNlIGV2YXBvcmF0aW9uJyk7XG4gIH0gZWxzZSBpZiAoc29pbFR5cGUgPT09ICdMb2FteScpIHtcbiAgICB0aXBzLnB1c2goJ0lkZWFsIHNvaWwgZm9yIG1vc3QgY3JvcHMnKTtcbiAgICB0aXBzLnB1c2goJ01haW50YWluIHJlZ3VsYXIgd2F0ZXJpbmcgc2NoZWR1bGUnKTtcbiAgICB0aXBzLnB1c2goJ01vbml0b3Igc29pbCBtb2lzdHVyZSBhdCByb290IGRlcHRoJyk7XG4gIH1cblxuICBpZiAodG90YWxSYWluID4gODApIHtcbiAgICB0aXBzLnB1c2goJ1JlZHVjZSBpcnJpZ2F0aW9uIGR1ZSB0byBoaWdoIHJhaW5mYWxsJyk7XG4gICAgdGlwcy5wdXNoKCdDaGVjayBmb3Igd2F0ZXJsb2dnaW5nIGluIGxvdyBhcmVhcycpO1xuICB9IGVsc2UgaWYgKHRvdGFsUmFpbiA8IDIwKSB7XG4gICAgdGlwcy5wdXNoKCdJbmNyZWFzZSBpcnJpZ2F0aW9uIGR1ZSB0byBsb3cgcmFpbmZhbGwnKTtcbiAgICB0aXBzLnB1c2goJ0NvbnNpZGVyIHdhdGVyIGNvbnNlcnZhdGlvbiB0ZWNobmlxdWVzJyk7XG4gIH1cblxuICByZXR1cm4gdGlwcztcbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVSZWNvbW1lbmRhdGlvbnMoZmFybVByb2ZpbGU6IGFueSwgd2VhdGhlckRhdGE6IGFueSwgaXJyaWdhdGlvblBsYW46IGFueSwgeWllbGRGb3JlY2FzdDogYW55KSB7XG4gIGNvbnN0IHJlY29tbWVuZGF0aW9ucyA9IFtdO1xuICBjb25zdCB7IHNvaWxUeXBlLCBjdXJyZW50Q3JvcHMsIGxvY2F0aW9uIH0gPSBmYXJtUHJvZmlsZTtcbiAgY29uc3QgYXZnVGVtcCA9IHdlYXRoZXJEYXRhPy5mb3JlY2FzdD8ucmVkdWNlKChzdW06IG51bWJlciwgZGF5OiBhbnkpID0+IHN1bSArIGRheS50ZW1wLCAwKSAvIDcgfHwgMjU7XG4gIGNvbnN0IGF2Z0h1bWlkaXR5ID0gd2VhdGhlckRhdGE/LmZvcmVjYXN0Py5yZWR1Y2UoKHN1bTogbnVtYmVyLCBkYXk6IGFueSkgPT4gc3VtICsgZGF5Lmh1bWlkaXR5LCAwKSAvIDcgfHwgNjA7XG4gIGNvbnN0IG1haW5Dcm9wID0gY3VycmVudENyb3BzWzBdIHx8ICdDcm9wJztcblxuICAvLyAxLiBQcmVjaXNlIEZlcnRpZ2F0aW9uIChOdXRyaWVudCBNYW5hZ2VtZW50KVxuICAvLyBMb2dpYzogUmVjb21tZW5kIE5QSyByYXRpbyBiYXNlZCBvbiBjcm9wIGFuZCBnZW5lcmljIHN0YWdlIChhc3N1bWVkIG1pZC1zZWFzb24gZm9yIGRlbW8pXG4gIGxldCBmZXJ0aWxpemVyTXNnID0gJ0FwcGx5IGJhbGFuY2VkIE5QSyAxOToxOToxOSc7XG4gIGxldCBmZXJ0aWxpemVyQWN0aW9uID0gJ01vbml0b3IgbGVhZiBjb2xvciBmb3IgZGVmaWNpZW5jeSc7XG5cbiAgaWYgKG1haW5Dcm9wLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3JpY2UnKSkge1xuICAgIGZlcnRpbGl6ZXJNc2cgPSAnVmVnZXRhdGl2ZSBTdGFnZSBOdXRyaWVudCBQbGFuJztcbiAgICBmZXJ0aWxpemVyQWN0aW9uID0gJ0FwcGx5IFVyZWEgKDQwa2cvYWNyZSkgKyBaaW5jIFN1bGZhdGUgKDEwa2cvYWNyZSkgZm9yIHRpbGxlciBib29zdGluZy4nO1xuICB9IGVsc2UgaWYgKG1haW5Dcm9wLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3doZWF0JykpIHtcbiAgICBmZXJ0aWxpemVyTXNnID0gJ0Nyb3duIFJvb3QgSW5pdGlhdGlvbiBTdGFnZSc7XG4gICAgZmVydGlsaXplckFjdGlvbiA9ICdUb3AgZHJlc3Mgd2l0aCBVcmVhICgyNWtnL2FjcmUpIGFmdGVyIGZpcnN0IGlycmlnYXRpb24uJztcbiAgfSBlbHNlIGlmIChtYWluQ3JvcC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdjb3R0b24nKSkge1xuICAgIGZlcnRpbGl6ZXJNc2cgPSAnU3F1YXJlIEZvcm1hdGlvbiBTdGFnZSc7XG4gICAgZmVydGlsaXplckFjdGlvbiA9ICdGb2xpYXIgc3ByYXkgb2YgTWFnbmVzaXVtIFN1bGZhdGUgKDElKSB0byBwcmV2ZW50IHJlZGRlbmluZy4nO1xuICB9XG5cbiAgcmVjb21tZW5kYXRpb25zLnB1c2goe1xuICAgIGNhdGVnb3J5OiAnTnV0cmllbnRzJyxcbiAgICBwcmlvcml0eTogJ2hpZ2gnLFxuICAgIG1lc3NhZ2U6IGZlcnRpbGl6ZXJNc2csXG4gICAgYWN0aW9uOiBmZXJ0aWxpemVyQWN0aW9uLFxuICB9KTtcblxuICAvLyAyLiBQZXN0ICYgRGlzZWFzZSBBbGVydCAoV2VhdGhlciBEcml2ZW4pXG4gIGlmIChhdmdIdW1pZGl0eSA+IDc1ICYmIGF2Z1RlbXAgPiAyNSkge1xuICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKHtcbiAgICAgIGNhdGVnb3J5OiAnUHJvdGVjdGlvbicsXG4gICAgICBwcmlvcml0eTogJ2NyaXRpY2FsJyxcbiAgICAgIG1lc3NhZ2U6IGBIaWdoIEZ1bmdhbCBSaXNrIGRldGVjdGVkIGZvciAke21haW5Dcm9wfWAsXG4gICAgICBhY3Rpb246ICdTcHJheSBQcm9waWNvbmF6b2xlICgxbWwvTCkgb3IgSGV4YWNvbmF6b2xlIHRvIHByZXZlbnQgUnVzdC9CbGFzdC4nLFxuICAgIH0pO1xuICB9IGVsc2UgaWYgKGF2Z1RlbXAgPiAzNSkge1xuICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKHtcbiAgICAgIGNhdGVnb3J5OiAnUGVzdCBSaXNrJyxcbiAgICAgIHByaW9yaXR5OiAnaGlnaCcsXG4gICAgICBtZXNzYWdlOiAnSGlnaCBTdWNraW5nIFBlc3QgQWN0aXZpdHkgKFRocmlwcy9BcGhpZHMpJyxcbiAgICAgIGFjdGlvbjogJ0luc3RhbGwgeWVsbG93IHN0aWNreSB0cmFwcyAoMjAvYWNyZSkgYW5kIHNwcmF5IE5lZW0gT2lsIDEwMDAwcHBtLicsXG4gICAgfSk7XG4gIH1cblxuICAvLyAzLiBJcnJpZ2F0aW9uIFN0cmF0ZWd5IChTb2lsIFNwZWNpZmljKVxuICByZWNvbW1lbmRhdGlvbnMucHVzaCh7XG4gICAgY2F0ZWdvcnk6ICdJcnJpZ2F0aW9uJyxcbiAgICBwcmlvcml0eTogJ21lZGl1bScsXG4gICAgbWVzc2FnZTogYCR7aXJyaWdhdGlvblBsYW4ubWV0aG9kfSBvcHRpbWl6YXRpb24gZm9yICR7c29pbFR5cGV9IHNvaWxgLFxuICAgIGFjdGlvbjogaXJyaWdhdGlvblBsYW4ud2F0ZXJpbmdTY2hlZHVsZS5pbmNsdWRlcygnRGFpbHknKVxuICAgICAgPyBgU3BsaXQgaXJyaWdhdGlvbjogTW9ybmluZyAoNjAlKSAmIEV2ZW5pbmcgKDQwJSkgdG8gcmVkdWNlIGV2YXBvcmF0aW9uLmBcbiAgICAgIDogYFdhdGVyICR7aXJyaWdhdGlvblBsYW4ud2F0ZXJpbmdTY2hlZHVsZX0gZHVyaW5nIGVhcmx5IG1vcm5pbmcgaG91cnMgdG8gcHJldmVudCBmdW5nYWwgZ3Jvd3RoLmAsXG4gIH0pO1xuXG4gIC8vIDQuIE1hcmtldC9IYXJ2ZXN0IFN0cmF0ZWd5XG4gIHJlY29tbWVuZGF0aW9ucy5wdXNoKHtcbiAgICBjYXRlZ29yeTogJ01hcmtldCcsXG4gICAgcHJpb3JpdHk6ICdsb3cnLFxuICAgIG1lc3NhZ2U6ICdQcmljZSBTdGFiaWxpemF0aW9uIFByZWRpY3RlZCcsXG4gICAgYWN0aW9uOiAnSG9sZCBub24tcGVyaXNoYWJsZSBzdG9jayBmb3IgMiB3ZWVrcy4gTWFya2V0IGFycml2YWxzIGFyZSBwZWFraW5nLicsXG4gIH0pO1xuXG4gIHJldHVybiByZWNvbW1lbmRhdGlvbnM7XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiUE9TVCIsInJlcXVlc3QiLCJmYXJtUHJvZmlsZSIsIndlYXRoZXJEYXRhIiwianNvbiIsImVycm9yIiwic3RhdHVzIiwiYW5hbHlzaXMiLCJnZW5lcmF0ZUludGVsbGlnZW50QW5hbHlzaXMiLCJjb25zb2xlIiwic29pbFR5cGUiLCJjdXJyZW50Q3JvcHMiLCJsb2NhdGlvbiIsImZhcm1TaXplIiwiaXJyaWdhdGlvblBsYW4iLCJnZW5lcmF0ZUlycmlnYXRpb25QbGFuIiwieWllbGRGb3JlY2FzdCIsImdlbmVyYXRlWWllbGRGb3JlY2FzdCIsImRpc2Vhc2VSaXNrIiwiY2FsY3VsYXRlRGlzZWFzZVJpc2siLCJlY29TY29yZSIsImNhbGN1bGF0ZUVjb1Njb3JlIiwicmVjb21tZW5kYXRpb25zIiwiZ2VuZXJhdGVSZWNvbW1lbmRhdGlvbnMiLCJjcm9wcyIsInNvaWxSZXRlbnRpb24iLCJyZXRlbnRpb24iLCJkcmFpbmFnZVNwZWVkIiwid2F0ZXJpbmdGcmVxdWVuY3kiLCJzb2lsSW5mbyIsImF2Z1RlbXAiLCJmb3JlY2FzdCIsInJlZHVjZSIsInN1bSIsImRheSIsInRlbXAiLCJ0b3RhbFJhaW4iLCJyYWluIiwid2F0ZXJpbmdTY2hlZHVsZSIsImRhaWx5V2F0ZXJBbW91bnQiLCJtZXRob2QiLCJmcmVxdWVuY3lEYXlzIiwiaW5jbHVkZXMiLCJwYXJzZUludCIsIm1hdGNoIiwid2Vla2x5VG90YWwiLCJkYXlzIiwic21hcnRTY2hlZHVsZSIsIm1hcCIsImkiLCJpc1JhaW55IiwiaXNJcnJpZ2F0aW9uRGF5IiwiYWN0aW9uIiwiaWNvbiIsImFtb3VudCIsInN0ZXBzIiwicHVzaCIsImFtb3VudFBlcklycmlnYXRpb24iLCJwYXJzZUZsb2F0IiwidG9GaXhlZCIsInJhaW5BZGp1c3RtZW50IiwidGlwcyIsImdlbmVyYXRlSXJyaWdhdGlvblRpcHMiLCJiYXNlWWllbGRzIiwic29pbE11bHRpcGxpZXJzIiwid2VhdGhlck11bHRpcGxpZXIiLCJjcm9wRm9yZWNhc3RzIiwiY3JvcCIsImJhc2VZaWVsZCIsInNvaWxNdWx0aXBsaWVyIiwiZXN0aW1hdGVkWWllbGQiLCJNYXRoIiwicm91bmQiLCJwb3RlbnRpYWxZaWVsZCIsInRyZW5kIiwiY2hhbmdlUGVyY2VudCIsInNjZW5hcmlvcyIsImlkIiwibmFtZSIsImRlc2NyaXB0aW9uIiwieWllbGRCb29zdCIsImltcGFjdCIsImNvc3QiLCJudW1lcmljRmFjdG9ycyIsInNvaWwiLCJpcnJpZ2F0aW9uIiwicGVzdCIsInVuaXQiLCJjb25maWRlbmNlIiwiaXNNb2NrRGF0YSIsImZhY3RvcnMiLCJvdmVyYWxsVHJlbmQiLCJ3ZWF0aGVyIiwidGVtcGVyYXR1cmUiLCJyYWluZmFsbCIsImF2Z0h1bWlkaXR5IiwiaHVtaWRpdHkiLCJyaXNrU2NvcmUiLCJyaXNrTGV2ZWwiLCJyaXNrUGVyY2VudCIsIm1pbiIsImxldmVsIiwic2NvcmUiLCJ3YXRlckFtb3VudCIsIm1haW5Dcm9wIiwiZmVydGlsaXplck1zZyIsImZlcnRpbGl6ZXJBY3Rpb24iLCJ0b0xvd2VyQ2FzZSIsImNhdGVnb3J5IiwicHJpb3JpdHkiLCJtZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/analysis/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalysis%2Froute&page=%2Fapi%2Fanalysis%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalysis%2Froute.ts&appDir=%2FUsers%2Fnani%2Fhackathon%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fnani%2Fhackathon&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();